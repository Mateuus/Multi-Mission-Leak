markers=[];((findDisplay 12)displayCtrl 51)ctrlAddEventHandler["Draw",{{(_this select 0)drawIcon _x;}forEach markers;}];while{true}do{sleep 1;while{visibleMap}do{_units=[];_text="";{_unit=_x;if(_x getVariable["esg_bewusstlos",false])exitWith{};if(!("ItemGPS" in assignedItems _x))exitWith{};if((vehicle _x)!=_unit)then{_crew=crew vehicle _x;{if !((_text find name _x)isEqualTo-1)exitWith{};_text=_text+format["%1",name _x];if(_foreachindex<(count _crew)-1)then{_text=_text+","};}foreach _crew;_units pushback[getText(configFile>>"CfgVehicles">>typeOf vehicle _x>>"Icon"),[0,1,0,1],visiblePosition vehicle _x,26,26,direction vehicle _x,format["%1",_text]];}else{_units pushback[getText(configFile>>"CfgVehicles">>typeOf vehicle _x>>"Icon"),[0,1,0,1],visiblePosition vehicle _x,26,26,direction vehicle _x,format["%1",name _x]];};_text="";}forEach(units group player);_marker=[];{_marker pushback _x;}foreach _units;markers=_marker;};};