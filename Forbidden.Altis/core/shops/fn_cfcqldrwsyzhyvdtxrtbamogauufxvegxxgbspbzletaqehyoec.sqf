
#include <macro.h>
 private["_mbtxuzefulobmikazjhuphjfmtevnekacoqbyqdtwklbchfdwsfzprkqpcvq","_clothes","_wsdivgjzlyxxzbzywpicrrcyiatvfcqfthpgtflhoqbwiqecjwyqdhscqijjyjhfpqmrj","_filter","_eqhggjjccyhltntmyougzjtabxcygsfxcjrfslnvderomajemwuyetrntyqlxigwqgsalg","_wpedubdbmsoyizidxradegalsbqdkcngwbugxwonwmxkuanhfxpldawdfqyzikohdzylru","_cqhacgjyvupirvcpifdtqpafoowrqfnflflhkbelprhfpvllcnrpawrijokpjfurjcu","_srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh","_nulrlouujfespwjlltoxtwloqesruqegkpewleozhwivbvoncltoomlnebigmqku","_ailwmvmnyhhmaapbzpqztvljdtppokrifjvxtowoekpiwgjropnxdqnwesxztjugummb","_bvekozmkbpctojpqrtrnaksteresejjnlutkygakncfwjbyocqfvkmjmhuarxxdcx","_ndztgpbzjfaqsrbovxgktsoiwtqijmqdhxekjmsbohjadwfxfrobljevlpmjyj"]; _ndztgpbzjfaqsrbovxgktsoiwtqijmqdhxekjmsbohjadwfxfrobljevlpmjyj = false;   if(!isClass(missionConfigFile >> "Clothing" >> (SEL(_this,3)))) exitWith {};    _nulrlouujfespwjlltoxtwloqesruqegkpewleozhwivbvoncltoomlnebigmqku = M_CONFIG(getText,"Clothing",(SEL(_this,3)),"title"); _bvekozmkbpctojpqrtrnaksteresejjnlutkygakncfwjbyocqfvkmjmhuarxxdcx = M_CONFIG(getText,"Clothing",(SEL(_this,3)),"side"); _ailwmvmnyhhmaapbzpqztvljdtppokrifjvxtowoekpiwgjropnxdqnwesxztjugummb = M_CONFIG(getText,"Clothing",(SEL(_this,3)),"license");  if(!(EQUAL(_ailwmvmnyhhmaapbzpqztvljdtppokrifjvxtowoekpiwgjropnxdqnwesxztjugummb,""))) then { 	_srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh = M_CONFIG(getText,"Licenses",_ailwmvmnyhhmaapbzpqztvljdtppokrifjvxtowoekpiwgjropnxdqnwesxztjugummb,"side"); 	if(!(LICENSE_VALUE(_ailwmvmnyhhmaapbzpqztvljdtppokrifjvxtowoekpiwgjropnxdqnwesxztjugummb,_srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh))) exitWith {hint localize "STR_Shop_Veh_NoLicense"; _ndztgpbzjfaqsrbovxgktsoiwtqijmqdhxekjmsbohjadwfxfrobljevlpmjyj = true;}; }; if(_ndztgpbzjfaqsrbovxgktsoiwtqijmqdhxekjmsbohjadwfxfrobljevlpmjyj) exitWith {};  _srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh = switch(playerSide) do {case west: {"cop"}; case independent: {"med"}; default {"civ"};}; if(!(EQUAL(_srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh,_bvekozmkbpctojpqrtrnaksteresejjnlutkygakncfwjbyocqfvkmjmhuarxxdcx))) exitWith {};  ctrlSetText [3103,localize _nulrlouujfespwjlltoxtwloqesruqegkpewleozhwivbvoncltoomlnebigmqku];  createDialog "Life_Clothing"; disableSerialization;    if((SEL(_this,3) in ["bruce","dive","reb","kart"] && playerSide != civilian)) exitWith {hint localize "STR_Shop_NotaCiv"; closeDialog 0;}; if((SEL(_this,3) == "reb" && FETCH_CONST(life_rebactive) == 0)) exitWith {hint "You are not a whitelisted rebel!"; closeDialog 0;}; if((SEL(_this,3) == "donator" && FETCH_CONST(life_donatorlvl) == 0)) exitWith {hint "You are not a donator!"; closeDialog 0;}; if((SEL(_this,3) in ["cop"] && playerSide != west)) exitWith {hint localize "STR_Shop_NotaCop"; closeDialog 0;}; if((SEL(_this,3) in ["dive"] && !license_civ_dive)) exitWith { hint localize "STR_Shop_NotaDive"; closeDialog 0;}; if(SEL(_this,3) == "cop" && (call life_insatsActive) == 1) exitWith {hint "Endast poliser!"; closeDialog 0;};  if(SEL(_this,3) == "insats" && (call life_insatsActive) == 0) exitWith {hint "Endast insatsstyrkan!"; closeDialog 0;};   player allowDamage false; life_inClothingShop = true;    _cqhacgjyvupirvcpifdtqpafoowrqfnflflhkbelprhfpvllcnrpawrijokpjfurjcu = getDir player; _wpedubdbmsoyizidxradegalsbqdkcngwbugxwonwmxkuanhfxpldawdfqyzikohdzylru = visiblePositionASL player;        player switchMove "";  life_clothing_store = SEL(_this,3);    if(isClass(missionConfigFile >> "Licenses" >> life_clothing_store)) then { 	_srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh = M_CONFIG(getText,"Licenses",life_clothing_store,"side"); 	_displayName = M_CONFIG(getText,"Licenses",life_clothing_store,"displayName"); 	if(!(LICENSE_VALUE(life_clothing_store,_srmdtvghbkcmpdskiofzpdqguwzcnovfmzaxlddtczjxwdrzlamdilhwmfabhlwroh))) exitWith { 		hint format[localize "STR_Shop_YouNeed",localize _displayName]; 		closeDialog 0; 		if(AllowedDamage) then {player allowDamage true;}; 		life_inClothingShop = false; 	}; };   life_shop_cam = "CAMERA" camCreate getPos player; showCinemaBorder false; life_shop_cam cameraEffect ["Internal", "Back"]; life_shop_cam camSetTarget (player modelToWorld [0,0,1]); life_shop_cam camSetPos (player modelToWorld [1,4,2]); life_shop_cam camSetFOV .33; life_shop_cam camSetFocus [50, 0]; life_shop_cam camCommit 0; life_cMenu_lock = false;  if(isNull (findDisplay 3100)) exitWith { 	if(AllowedDamage) then {player allowDamage true;}; 	life_inClothingShop = false; };  _mbtxuzefulobmikazjhuphjfmtevnekacoqbyqdtwklbchfdwsfzprkqpcvq = (findDisplay 3100) displayCtrl 3101; _filter = (findDisplay 3100) displayCtrl 3105; lbClear _filter; lbClear _mbtxuzefulobmikazjhuphjfmtevnekacoqbyqdtwklbchfdwsfzprkqpcvq;  _filter lbAdd localize "STR_Shop_UI_Clothing"; _filter lbAdd localize "STR_Shop_UI_Hats"; _filter lbAdd localize "STR_Shop_UI_Glasses"; _filter lbAdd localize "STR_Shop_UI_Vests"; _filter lbAdd localize "STR_Shop_UI_Backpack";  _filter lbSetCurSel 0;  life_oldClothes = uniform player; life_olduniformItems = uniformItems player; life_oldBackpack = backpack player; life_oldVest = vest player; life_oldVestItems = vestItems player; life_oldBackpackItems = backpackItems player; life_oldGlasses = goggles player; life_oldHat = headgear player;  waitUntil {isNull (findDisplay 3100)};   detach player;  player setDir _cqhacgjyvupirvcpifdtqpafoowrqfnflflhkbelprhfpvllcnrpawrijokpjfurjcu;  life_shop_cam cameraEffect ["TERMINATE","BACK"]; camDestroy life_shop_cam; life_clothing_filter = 0; if(isNil "life_clothesPurchased") exitWith { 	life_clothing_purchase = [-1,-1,-1,-1,-1]; 	if(life_oldClothes != "") then {player addUniform life_oldClothes;} else {removeUniform player}; 	if(life_oldHat != "") then {player addHeadgear life_oldHat} else {removeHeadgear player;}; 	if(life_oldGlasses != "") then {player addGoggles life_oldGlasses;} else {removeGoggles player}; 	if(backpack player != "") then { 		if(life_oldBackpack == "") then { 			removeBackpack player; 		} else { 			removeBackpack player; 			player addBackpack life_oldBackpack; 			clearAllItemsFromBackpack player; 			if(count life_oldBackpackItems > 0) then { 				{ 					[_x,true,true] call life_fnc_handleItem; 				} foreach life_oldBackpackItems; 			}; 		}; 	}; 	 	if(count life_oldUniformItems > 0) then { 		{[_x,true,false,false,true] call life_fnc_handleItem;} foreach life_oldUniformItems; 	}; 	 	if(vest player != "") then { 		if(life_oldVest == "") then { 			removeVest player; 		} else { 			player addVest life_oldVest; 			if(count life_oldVestItems > 0) then { 				{[_x,true,false,false,true] call life_fnc_handleItem;} foreach life_oldVestItems; 			}; 		}; 	}; 	if(AllowedDamage) then {player allowDamage true;}; 	life_inClothingShop = false; }; life_clothesPurchased = nil;     if((life_clothing_purchase select 0) == -1) then { 	if(life_oldClothes != uniform player) then { 		if(life_oldClothes == "") then { 			removeUniform player; 		} else { 			player addUniform life_oldClothes; 		}; 	}; };   if((life_clothing_purchase select 1) == -1) then { 	if(life_oldHat != headgear player) then { 		if(life_oldHat == "") then { 			removeHeadGear player; 		} else { 			player addHeadGear life_oldHat; 		}; 	}; };  if((life_clothing_purchase select 2) == -1) then { 	if(life_oldGlasses != goggles player) then { 		if(life_oldGlasses == "") then  { 			removeGoggles player; 		} else { 			player addGoggles life_oldGlasses; 		}; 	}; };  if((life_clothing_purchase select 3) == -1) then { 	if(life_oldVest != vest player) then { 		if(life_oldVest == "") then {removeVest player;} else { 			player addVest life_oldVest; 			{[_x,true,false,false,true] call life_fnc_handleItem;} foreach life_oldVestItems; 		}; 	}; };   if((life_clothing_purchase select 4) == -1) then { 	if(life_oldBackpack != backpack player) then { 		if(life_oldBackpack == "") then {removeBackpack player;} else { 			removeBackpack player; 			player addBackpack life_oldBackpack; 			{[_x,true,true] call life_fnc_handleItem;} foreach life_oldBackpackItems; 		}; 	}; }; if(AllowedDamage) then {player allowDamage true;}; life_inClothingShop = false;  life_clothing_purchase = [-1,-1,-1,-1,-1]; [] call life_fnc_wrkibhoprwgzzqikpvkmdebpbfywrjtnwqxfwowjwwgksrgsjlgjuyxnvxe; [] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; 